!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=0)}([function(t,e,s){s(2),t.exports=s(1)},function(t,e,s){},function(t,e,s){"use strict";s.r(e);class i{constructor(){this.$promoImg=document.querySelector(".promo__img"),this.$promoTitle=document.querySelector(".promo__title"),this.$promoSubtitle=document.querySelector(".promo__subtitle"),this.$promoButton=document.querySelector(".promo__button-buy"),this.init()}init(){this.preloaderHandler()}preloaderHandler(){window.onload=()=>{document.body.classList.add("loaded_hiding"),this.promoAnimationsHandler(),window.setTimeout(()=>{document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")},500)}}promoAnimationsHandler(){this.$promoImg.classList.add("fadeInRight"),this.$promoTitle.classList.add("fadeInUp"),this.$promoSubtitle.classList.add("fadeInUp"),this.$promoButton.classList.add("fadeInLeft")}static getDuration(t,e){return+getComputedStyle(document.querySelector(t)).getPropertyValue(e).match(/\d/g).join("")}}const r=new class{constructor(){this.$header=document.querySelector(".header"),this.$animationStartingBlock=document.querySelector(".promo")}isHeaderShouldBeShown(){n.isElemScrolledDown(this.$animationStartingBlock)?this.$header.classList.add("header--fixed"):this.$header.classList.remove("header--fixed")}};const o=new class{constructor(){this.$counterStartingBlock=document.querySelector(".gallery"),this.settings=[{$element:document.querySelector(".fact-num--1"),totalValue:3560,intervalDelay:15,stepValue:73},{$element:document.querySelector(".fact-num--2"),totalValue:195,intervalDelay:30,stepValue:4},{$element:document.querySelector(".fact-num--3"),totalValue:455,intervalDelay:30,stepValue:9},{$element:document.querySelector(".fact-num--4"),totalValue:15,intervalDelay:110,stepValue:1}],this.countersWasScrolled=!1}isCountersShouldBeRunning(){if(!n.isElemScrolledDown(this.$counterStartingBlock)||this.countersWasScrolled)return!1;this.settings.forEach(t=>this.startFastCounterPhase(t)),this.countersWasScrolled=!0}startFastCounterPhase({$element:t,intervalDelay:e,totalValue:s,stepValue:i}){let r=0;const o=parseInt(i),n=s-i,a=setInterval(()=>{r+=o,t.innerText=r.toString(),r>=n&&(clearInterval(a),this.startSlowCounterPhase(t,s,e))},e)}startSlowCounterPhase(t,e,s,i=1){let r=parseInt(t.innerText);const o=setInterval(()=>{if(r+=i,t.innerText=r.toString(),r>=e)return clearInterval(o),!1},s)}};class n{constructor(){this.isScrolling=!1,this.indentFromElement=200,this.init()}init(){window.addEventListener("scroll",this.throttleScroll.bind(this))}throttleScroll(){!1===this.isScrolling&&window.requestAnimationFrame(()=>{r.isHeaderShouldBeShown(),o.isCountersShouldBeRunning(),this.isScrolling=!1}),this.isScrolling=!0}static isElemScrolledDown(t){return t.getBoundingClientRect().bottom<=200}}new i,new class{constructor(){this.$input=document.querySelector(".count-button__input"),this.$minus=document.querySelector(".count-button__minus"),this.$plus=document.querySelector(".count-button__plus"),this.init()}init(){this.$minus.addEventListener("click",()=>this.goodsQuantityCounter(1)),this.$plus.addEventListener("click",()=>this.goodsQuantityCounter(-1))}goodsQuantityCounter(t){let e=parseInt(this.$input.value);e-=t,e<=0&&(e=0),this.$input.value=e.toString()}},new class{constructor(){this.$button=document.querySelector(".add-to-card-button"),this.$inputQty=document.querySelector(".count-button__input"),this.product=".chosen-product__img",this.dataID="data-id",this.$shopCart=document.querySelector(".shop-cart"),this.$warning=document.querySelector(".count-button__warning"),this.isWarningShown=!1,this.init()}init(){this.$button.addEventListener("click",()=>this.productDataHandler()),this.$inputQty.addEventListener("reset-qty",()=>this.resetEnteredProductQty())}productDataHandler(){const t=document.querySelector(this.product).getAttribute(this.dataID),e=this.$inputQty.value;e>0&&this.isWarningShown&&this.hideWarningMessage(),e<=0?this.showWarningMessage():this.dispatchCurrentProductData(t,e),this.resetEnteredProductQty()}showWarningMessage(){this.$warning.classList.remove("collapsed"),this.$warning.classList.add("smoothlyShow"),this.isWarningShown=!0}hideWarningMessage(){this.$warning.classList.remove("smoothlyShow"),this.$warning.classList.add("collapsed"),this.isWarningShown=!1}resetEnteredProductQty(){this.$inputQty.value=0}dispatchCurrentProductData(t,e){this.$shopCart.dispatchEvent(new CustomEvent("get-product-data",{detail:{id:t,qty:e}}))}},new class{constructor(){this.$togglerWrapper=document.querySelector(".header__toggler-wrapper"),this.$menuToggler=document.querySelector(".header__menu-toggler"),this.$menu=document.querySelector(".menu"),this.$header=document.querySelector(".header"),this.init()}init(){this.$togglerWrapper.addEventListener("click",()=>{this.$menuToggler.classList.toggle("toggler--active"),this.$menu.classList.toggle("menu--opened"),this.$header.classList.toggle("header--border-none")})}},new n,new class{constructor(){this.animationTime=i.getDuration(":root","--smoothly-anims-duration"),this.$buttonsParent=document.querySelector(".product-menu"),this.arrayOfCards=Array.from(document.querySelectorAll(".card")),this.init()}init(){this.$buttonsParent.addEventListener("click",t=>this.showCorrectCards(t))}showCorrectCards(t){const e=t.target.dataset.type;if("all"===e)return void this.arrayOfCards.forEach(t=>{t.classList.remove("collapsed","smoothlyHide"),t.classList.add("smoothlyShow")});const s=this.arrayOfCards.filter(t=>t.dataset.type!==e),i=this.arrayOfCards.filter(t=>t.dataset.type===e);s.forEach(t=>{t.classList.remove("smoothlyShow"),t.classList.add("smoothlyHide"),t.style.animationDuration=this.animationTime.toString()+"ms",setTimeout(()=>t.classList.add("collapsed"),this.animationTime)}),i.forEach(t=>{t.classList.remove("smoothlyHide"),t.classList.add("smoothlyShow"),t.style.animationDuration=this.animationTime.toString()+"ms",setTimeout(()=>t.classList.remove("collapsed"),this.animationTime)})}},new class{constructor(){this.$imageBefore=document.querySelector(".changes__image-wrapper--before"),this.$inputRange=document.querySelector(".slider-control"),this.$inputContainer=document.querySelector(".changes__slider-container"),this.inputValueCounter=0,this.elemWidthCounter=100,this.init()}init(){this.$inputContainer.addEventListener("click",t=>{"changes__button--after"===t.target.classList[0]&&this.valueHandler(1),"changes__button--before"===t.target.classList[0]&&this.valueHandler(-1)}),this.$inputRange.addEventListener("input",()=>{this.$imageBefore.style.width=100-this.$inputRange.value+"%"})}valueHandler(t){const e=window.setInterval(()=>{this.$inputRange.disabled=1,this.inputValueCounter+=t,this.elemWidthCounter-=t,this.$inputRange.value=this.inputValueCounter,this.$imageBefore.style.width=this.elemWidthCounter+"%",(this.inputValueCounter>=100||this.inputValueCounter<=0)&&clearInterval(e),this.$inputRange.disabled=0},10)}},new class{constructor(){this.$arrowLeft=document.querySelector(".product-slider__arrow--left"),this.$arrowRight=document.querySelector(".product-slider__arrow--right"),this.$images=document.querySelector(".product-slider__images"),this.$chosenImage=document.querySelector(".product-slider__chosen-product"),this.$input=document.querySelector(".count-button__input"),this.products=[],this.maxIDValueOfProducts=null,this.animationDuration=i.getDuration(":root","--smoothly-anims-duration"),this.qtySliderImages=3,this.screenWidthResolution=768,this.init()}init(){this.$arrowLeft.addEventListener("click",()=>this.leftArrowClickHandler()),this.$arrowRight.addEventListener("click",()=>this.rightArrowClickHandler()),this.$images.addEventListener("click",t=>this.imageClickHandler(t)),this.getData()}getData(){fetch("https://api.npoint.io/19d66b0856fad4035fb1").then(t=>t.json()).then(t=>{this.products=t.goods,this.maxIDValueOfProducts=this.products.length-1,this.defineNumSliderImages()})}defineNumSliderImages(){document.documentElement.clientWidth>=this.screenWidthResolution&&(this.qtySliderImages=4),this.render()}render(){for(let t=0;t<this.qtySliderImages;t++)this.addImageToSlider(t,"beforeEnd");this.displayChosenImage(this.$images.firstElementChild)}leftArrowClickHandler(){this.$images.firstElementChild.classList.add("smoothlyHide"),setTimeout(()=>{let t=this.getElemID(this.$images.lastElementChild)+1;t>this.maxIDValueOfProducts&&(t=0),this.$images.firstElementChild.remove(),this.displayChosenImage(this.$images.firstElementChild),this.addImageToSlider(t,"beforeEnd")},this.animationDuration),this.dispatchResetProductQty()}rightArrowClickHandler(){this.$images.lastElementChild.classList.add("smoothlyHide"),setTimeout(()=>{let t=this.getElemID(this.$images.firstElementChild)-1;t<0&&(t=this.maxIDValueOfProducts),this.$images.lastElementChild.remove(),this.displayChosenImage(this.$images.lastElementChild),this.addImageToSlider(t,"afterBegin")},this.animationDuration),this.dispatchResetProductQty()}dispatchResetProductQty(){+this.$input.value>0&&this.$input.dispatchEvent(new CustomEvent("reset-qty"))}imageClickHandler(t){if("IMG"!==t.target.tagName)return!1;this.displayChosenImage(t.target),this.dispatchResetProductQty()}displayChosenImage(t){this.$chosenImage.childElementCount>0&&this.$chosenImage.firstElementChild.remove();const e=t.cloneNode(!0);e.className="chosen-product__img smoothlyShow",this.$chosenImage.insertAdjacentElement("afterBegin",e),this.dispatchProductData(t.getAttribute("data-id"))}getElemID(t){const e=t.classList.value;return parseInt(e.match(/[0-9]/s)[0])}addImageToSlider(t,e){const s=`<img class="product-slider__img product-img_${t}" \n                src="${this.products[t].img}"\n                data-id="${t}" \n                alt="спортивное питание">`;this.$images.insertAdjacentHTML(e,s)}dispatchProductData(t){const e=this.products[t];document.querySelector(".order__product-info").dispatchEvent(new CustomEvent("get-product-id",{detail:{product:e}}))}},new class{constructor(){this.$product=document.querySelector(".order__product-info"),this.$title=document.querySelector(".product-info__title"),this.$price=document.querySelector(".product-info__price > span"),this.$description=document.querySelector(".product-info__description"),this.$weight=document.querySelector(".product-info__weight > span"),this.init()}init(){this.$product.addEventListener("get-product-id",t=>this.showProductDescription(t.detail.product))}showProductDescription({name:t,price:e,weight:s,description:i}){this.$title.innerText=t,this.$price.innerText=e,this.$weight.innerText=s,this.$description.innerText=i}},new class{constructor(){this.$cart=document.querySelector(".shop-cart"),this.$cartIcon=document.querySelector(".shop-cart-icon"),this.$closeCart=document.querySelector(".shop-cart__close-cart"),this.$cartWrapper=document.querySelector(".shop-cart__products-wrapper"),this.$total=document.querySelector(".shop-cart__total-price > span"),this.$cartIconValue=document.querySelector(".shop-cart__value"),this.$cartOrderWrapper=document.querySelector(".shop-cart__order-wrapper"),this.$cartButton=document.querySelector(".shop-cart__button"),this.$successMessage=document.querySelector(".shop-cart__success-message"),this.$cartEmptyMessage=document.querySelector(".shop-cart__empty-message"),this.$cartBody=document.querySelector(".shop-cart__body"),this.products=null,this.currentProduct=null,this.totalAmount=null,this.messageDisplaingTime=2e3,this.init()}init(){this.openHandler(),this.closeHandler(),this.getCurrentProductInfo(),this.$cartButton.addEventListener("click",()=>this.userOrderHandler())}openHandler(){this.$cartIcon.addEventListener("click",()=>{this.$cart.classList.remove("collapsed"),this.$cartBody.classList.remove("collapsed"),this.emptyMessageHandler()})}closeHandler(){this.$closeCart.addEventListener("click",()=>{this.$cart.classList.add("collapsed")})}getCurrentProductInfo(){this.$cart.addEventListener("get-product-data",t=>{this.currentProduct=t.detail,this.products?this.render():this.fetchData()})}fetchData(){fetch("https://api.npoint.io/19d66b0856fad4035fb1").then(t=>t.json()).then(t=>{this.products=t.goods,this.render()})}render(){if(this.$cartWrapper.childElementCount>0&&!this.isProductRepeated())return this.getProductAmount(),!1;this.add(),this.showCartIconValue(),this.getProductAmount(),this.getTotalAmount(),this.remove(),this.emptyMessageHandler()}showCartIconValue(){this.$cartIconValue.innerText=this.$cartWrapper.childElementCount.toString()}emptyMessageHandler(){this.$cartWrapper.childElementCount>0?(this.$cartEmptyMessage.classList.add("collapsed"),this.$cartOrderWrapper.classList.remove("collapsed")):0===this.$cartWrapper.childElementCount&&(this.$cartEmptyMessage.classList.remove("collapsed"),this.$cartOrderWrapper.classList.add("collapsed"))}getProductAmount(){let t=0;document.querySelectorAll(".shop-cart__cart-product").forEach(e=>{const s=e.querySelector(".cart-product__qty").textContent,i=e.querySelector(".cart-product__item-price > span").textContent;t=+s*+i;e.querySelector(".cart-product__total-item-price > span").innerText=t.toString()})}getTotalAmount(){let t=0;this.$cartWrapper.querySelectorAll(".cart-product__total-item-price > span").forEach(e=>{t+=+e.textContent}),this.totalAmount=t,this.$total.innerText=this.totalAmount}remove(){document.querySelectorAll(".cart-product__delete_item").forEach(t=>t.addEventListener("click",e=>{t.parentElement.remove(),this.getTotalAmount(),this.showCartIconValue(),this.emptyMessageHandler()}))}add(){const t=this.products[this.currentProduct.id],e=`<div class="shop-cart__cart-product" data-id="${this.currentProduct.id}">\n                <img class="cart-product__image" src="${t.img}">\n                <div class="cart-product__name">${t.name}</div>\n                <div class="cart-product__qty">${this.currentProduct.qty}</div>\n                <div class="cart-product__multiply">&#10005;</div>\n                <div class="cart-product__item-price"><span>${t.price}</span>&#8381;</div> \n                <div class="cart-product__equal">&#61;</div>\n                <div class="cart-product__total-item-price"><span></span>&#8381;</div>\n                <div class="cart-product__delete_item">&#10005;</div>\n         </div>`;this.$cartWrapper.insertAdjacentHTML("beforeEnd",e)}isProductRepeated(){let t=!1;return document.querySelectorAll(".shop-cart__cart-product").forEach(e=>{if(+e.getAttribute("data-id")==+this.currentProduct.id){const s=e.querySelector(".cart-product__qty"),i=+s.textContent+ +this.currentProduct.qty;s.innerText=i.toString(),t=!0}}),!t}userOrderHandler(){const t=[];document.querySelectorAll(".shop-cart__cart-product").forEach(e=>{const s={id:+e.getAttribute("data-id"),name:e.querySelector(".cart-product__name").textContent,qty:+e.querySelector(".cart-product__qty").textContent,totalPrice:+e.querySelector(".cart-product__total-item-price > span").textContent};t.push(s)}),fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(t=>t.json()).then(t=>{console.log(t),this.showMessage()})}showMessage(){this.clear(),this.$cartBody.classList.add("collapsed"),this.$successMessage.classList.remove("collapsed"),setTimeout(()=>{this.$successMessage.classList.add("collapsed"),this.$cart.classList.add("collapsed")},this.messageDisplaingTime)}clear(){document.querySelectorAll(".cart-product__delete_item").forEach(t=>{t.parentElement.remove(),this.showCartIconValue(),this.emptyMessageHandler()})}},new class{constructor(){this.$email=document.querySelector(".form__email"),this.$text=document.querySelector(".form__text"),this.$button=document.querySelector(".form__button"),this.$warning=document.querySelector(".form__warning"),this.$success=document.querySelector(".footer__success-message-wrapper"),this.isWarningShown=!1,this.messageDisplaingTime=2e3,this.formData={email:"",text:""},this.init()}init(){this.$button.addEventListener("click",t=>{t.preventDefault(),this.getInputsValue(),this.isWarningShown&&this.hideWarningMessage(),this.validateEmail(this.formData.email)?this.sendUserMessage():(this.showWarning(),this.isWarningShown=!0)})}getInputsValue(){this.formData.email=this.$email.value,this.formData.text=this.$text.value}validateEmail(t){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)}sendUserMessage(){fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(this.formData),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(t=>t.json()).then(t=>{console.log(t),this.showSuccessMessage()})}showSuccessMessage(){this.clear(),this.$success.classList.remove("collapsed"),setTimeout(()=>{this.$success.classList.add("collapsed")},this.messageDisplaingTime)}showWarning(){this.$warning.classList.remove("collapsed"),this.$warning.classList.add("smoothlyShow"),this.isWarningShown=!0}hideWarningMessage(){this.$warning.classList.remove("smoothlyShow"),this.$warning.classList.add("collapsed"),this.isWarningShown=!1}clear(){this.$email.value="",this.$text.value=""}}({}),new class{constructor(){this.path="youtube.api.js",this.$videoButton=document.querySelector(".video-area__play-button"),this.$videoWrapper=document.querySelector(".video__body-wrapper"),this.init()}init(){this.$videoButton.addEventListener("click",t=>{t.preventDefault(),this.videoDisplayHandler(),this.activateYoutubeAPI()})}activateYoutubeAPI(){const t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("script");e.type="text/javascript",e.src=this.path,t.appendChild(e)}videoDisplayHandler(){this.$videoWrapper.classList.remove("collapsed"),this.$videoWrapper.addEventListener("click",()=>{this.hideVideo()})}hideVideo(){this.$videoWrapper.classList.add("collapsed"),player.pauseVideo()}}}]);